para este código: 
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import os, re, json
from pathlib import Path
from collections import defaultdict
from dotenv import load_dotenv
from langchain.schema import Document
from langchain_core.chat_history import InMemoryChatMessageHistory
from langchain_core.messages import HumanMessage, AIMessage
from langchain_core.prompts import ChatPromptTemplate, PromptTemplate
from langchain_google_genai import ChatGoogleGenerativeAI, GoogleGenerativeAIEmbeddings
from langchain_qdrant import Qdrant
import qdrant_client
from qdrant_client.http import models as qmodels
from langchain.chains import LLMChain
from langchain_core.runnables import RunnableMap


# ────────────────────────────────────────────────────────────────────────────────
# 0. Variables de entorno
# ────────────────────────────────────────────────────────────────────────────────
load_dotenv()
API_KEY        = os.getenv("GOOGLE_API_KEY")
QDRANT_API_KEY = os.getenv("QDRANT_API_KEY")
QDRANT_URL     = os.getenv("QDRANT_URL")

COLLECTION_NAME = "Prevencion_de_blanqueo_y_finanzas_sensibles"

# ─── CAMBIO ─── directorio de PDFs (no JSON)
PDF_DIR = "/home/reboot-student/Desktop/Licitacion/docs/leyes/a"

emb = GoogleGenerativeAIEmbeddings(model="models/embedding-001", google_api_key=API_KEY)
client = qdrant_client.QdrantClient(url=QDRANT_URL, api_key=QDRANT_API_KEY)

COLLECTIONS_SEARCH = [
    " Normativa General y Contratación Pública",
    "proteccion_de_datos_y_seguridad_digital",
    "sostenibilidad_recuperacion_y_fondos_europeos"
]

vectorstores = {
    name: Qdrant(
        client=client,
        collection_name=name,
        embeddings=emb
    )
    for name in COLLECTIONS_SEARCH
}
def contexto_multi_colecciones(query: str, k: int = 10) -> str:
    """
    Recorre cada colección, extrae los k documentos más similares
    y devuelve un string combinando todo, marcado por cabeceras.
    """
    bloques = []
    for nombre, store in vectorstores.items():
        docs = store.similarity_search(query, k=k)
        if not docs:
            continue
        # ­┆ Opcional: podrías resumir aquí cada bloque con el LLM si pesa demasiado
        bloque = "\n".join(d.page_content for d in docs)
        bloques.append(f"### {nombre}\n{bloque}")
    return "\n\n".join(bloques)


# ─── thresholds.py ───
EU_THRESHOLDS_2025 = {
     "services_subcentral": 221_000,   # €  Sin IVA
 }

SIMPLIFIED_LIMIT = 215_000           # hasta 214.999,99 € → art.159.1
ABBREV_LIMIT     = 60_000            # art.159.6


# ─── helpers_contract.py ───

def procedure_type(vec: float) -> str:
    if vec >= EU_THRESHOLDS_2025["services_subcentral"]:
        return "abierto_ordinario"
    if vec <= ABBREV_LIMIT:
        return "simplificado_abreviado"
    if vec <= SIMPLIFIED_LIMIT:
        return "abierto_simplificado"
    return "abierto_ordinario"

def sara(vec: float) -> bool:
    return vec >= EU_THRESHOLDS_2025["services_subcentral"]


# ────────────────────────────────────────────────────────────────────────────────
# 1. Historial
# ────────────────────────────────────────────────────────────────────────────────
history = InMemoryChatMessageHistory()
def construir_historial_chat(msgs):
    partes = []
    for m in msgs[-6:]:
        pref = "Humano: " if isinstance(m, HumanMessage) else "Asistente: "
        partes.append(pref + m.content)
    return "\n".join(partes)

# ────────────────────────────────────────────────────────────────────────────────
# 2‑3. LLM base y chat casual
# ────────────────────────────────────────────────────────────────────────────────
llm = ChatGoogleGenerativeAI(model="gemini-2.5-flash", temperature=0.5)
chat_chain = (
    ChatPromptTemplate.from_messages(
        [("system", "Eres un asistente de IA amistoso y útil."),
         ("human", "{question}")]
    )
    | llm
)

# ────────────────────────────────────────────────────────────────────────────────
# 4. Carga y troceo de artículos DESDE PDF
# ────────────────────────────────────────────────────────────────────────────────
from langchain_community.document_loaders import PyPDFLoader            # ─── CAMBIO ───

# ─── CAMBIO ───: patrones y helpers para dividir PDFs en artículos
REG_TITULO_LINEA = re.compile(
    r'^\s*(?:Artículo\s+\d+[\.\)\-:]?\s+.+?|'
    r'Disposición\s+(?:adicional|transitoria|derogatoria|final)\s+\d*[A-Z]?[\.\)\-:]?.*?|'
    r'Preámbulo|Exposición\s+de\s+motivos|Anexo\s+\w+.*?)\s*$',
    re.IGNORECASE
)
REG_ARTICULO_INLINE = re.compile(
    r'\bArtículo\s+\d+[\.\)\-:]?\s+[A-ZÁÉÍÓÚÜÑ][^\n]*',
    re.IGNORECASE
)

def split_inline_articulos(texto, pagina, titulo_padre):
    mats = list(REG_ARTICULO_INLINE.finditer(texto))
    if not mats:
        return [{"titulo": titulo_padre or "(sin título)",
                 "contenido": texto.strip(), "pagina": pagina}]
    bloques = []
    for i, m in enumerate(mats):
        inicio = m.end()
        fin    = mats[i+1].start() if i+1<len(mats) else len(texto)
        titulo = titulo_padre if i==0 and titulo_padre else m.group(0).strip()
        bloques.append({"titulo": titulo,
                        "contenido": texto[inicio:fin].strip(),
                        "pagina": pagina})
    return bloques

def procesar_pdf(ruta_pdf: Path):
    loader  = PyPDFLoader(str(ruta_pdf))
    paginas = loader.load()

    bloques, bloque = [], {"titulo": None, "contenido": "", "pagina": None}

    for doc in paginas:
        pagina = doc.metadata.get("page") or doc.metadata.get("page_number")
        for linea in (doc.page_content or "").splitlines():
            linea = linea.strip()
            if not linea: 
                continue
            if REG_TITULO_LINEA.match(linea):
                if bloque["titulo"] and bloque["contenido"].strip():
                    bloques.extend(
                        split_inline_articulos(bloque["contenido"],
                                               bloque["pagina"],
                                               bloque["titulo"])
                    )
                bloque = {"titulo": linea, "contenido": "", "pagina": pagina}
            else:
                bloque["contenido"] += linea + "\n"

    if bloque["titulo"] and bloque["contenido"].strip():
        bloques.extend(
            split_inline_articulos(bloque["contenido"],
                                   bloque["pagina"],
                                   bloque["titulo"])
        )
    return bloques

# ─── FIN helpers PDF ───

def split_articulo_en_partes(titulo, texto, pagina, max_chars=1800):
    buffer, partes, idx = f"{titulo}\n", [], 1
    for p in texto.splitlines():
        p = p.strip()
        if not p: continue
        if len(buffer) + len(p) < max_chars:
            buffer += p + "\n"
        else:
            partes.append(
                Document(
                    page_content=f"[Página {pagina}]\n{titulo}\n(Parte {idx})\n{buffer.strip()}",
                    metadata={"titulo": titulo, "parte": idx, "page": pagina}
                )
            )
            idx, buffer = idx + 1, p + "\n"
    if buffer.strip():
        partes.append(
            Document(
                page_content=f"[Página {pagina}]\n{titulo}\n(Parte {idx})\n{buffer.strip()}",
                metadata={"titulo": titulo, "parte": idx, "page": pagina}
            )
        )
    return partes

# ─── CAMBIO ───: carga chunks directamente desde los PDF
def cargar_chunks_desde_pdfs(carpeta):
    chunks = []
    for path in Path(carpeta).glob("*.pdf"):
        for entrada in procesar_pdf(path):
            for p in split_articulo_en_partes(
                entrada["titulo"], entrada["contenido"], entrada["pagina"]
            ):
                p.metadata["source"] = path.name
                chunks.append(p)
    return chunks

def agrupar_chunks_por_titulo(chs):
    grupos = defaultdict(list)
    for d in chs:
        grupos[d.metadata["titulo"]].append(d)
    fusion = []
    for titulo, docs in grupos.items():
        docs.sort(key=lambda d: d.metadata.get("parte", 0))
        fusion.append(
            Document(
                page_content="\n".join(d.page_content for d in docs),
                metadata=docs[0].metadata,
            )
        )
    return fusion

# ─── CAMBIO ───
chunks = cargar_chunks_desde_pdfs(PDF_DIR)

# Índice auxiliar →  número de artículo  → [chunks]
idx_por_num = defaultdict(list)
pat_num = re.compile(r"\b(\d+)\b")
for c in chunks:
    if m := pat_num.search(c.metadata["titulo"]):
        idx_por_num[m.group(1)].append(c)

# ────────────────────────────────────────────────────────────────────────────────
# 7. Embeddings y Qdrant
# ────────────────────────────────────────────────────────────────────────────────

# if client.collection_exists(COLLECTION_NAME):
#     client.delete_collection(COLLECTION_NAME)

# client.create_collection(
#     COLLECTION_NAME,
#     vectors_config=qmodels.VectorParams(size=768, distance=qmodels.Distance.COSINE),
# )
vectorstore = Qdrant(client=client, collection_name=COLLECTION_NAME, embeddings=emb)

# vectorstore.add_documents(chunks)
# ────────────────────────────────────────────────────────────────────────────────
# 8. Cadena RAG
# ────────────────────────────────────────────────────────────────────────────────
rag_prompt = PromptTemplate.from_template(
    "Eres un experto redactor de licitaciones públicas en España, especializado en la elaboración de pliegos de cláusulas administrativas particulares. "
    "Tu tarea es redactar, desde cero, un pliego completo y técnicamente riguroso para un contrato de servicios informáticos (CPV 72500000). "
    "Debes utilizar un lenguaje jurídico-administrativo preciso, estructurado conforme a la normativa vigente en España.\n\n"
    "Debes fundamentarte especialmente en la Ley 9/2017, de 8 de noviembre, de Contratos del Sector Público, y citar los artículos relevantes "
    "en cada apartado (por ejemplo: objeto del contrato, procedimiento de adjudicación, criterios de solvencia, garantías, etc.). "
    "También puedes apoyarte en otras normas complementarias o guías oficiales cuando sea adecuado.\n\n"
    "Utiliza la documentación proporcionada como soporte y referencia directa, y ten en cuenta el historial del chat para mantener la coherencia del contenido.\n\n"
    "Historial del chat:\n{chat_history}\n\n"
    "Documentación de apoyo:\n{context}\n\n"
    "Instrucción o pregunta específica:\n{question}"
)
doc_chain = LLMChain(llm=llm, prompt=rag_prompt)
qa_chain = RunnableMap({
    "context":     lambda x: vectorstore.similarity_search(x["query"], k=25),
    "question":    lambda x: x["query"],
    "chat_history":lambda x: x["chat_history"],
}) | doc_chain

def ask_float(prompt):
    while True:
        try:
            return float(input(prompt).replace('.', '').replace(',', '.'))
        except ValueError:
            print("❗ Introduce un número válido.")

def preguntar_datos():
    print("📝 Vamos a generar una licitación personalizada. Contesta las siguientes preguntas:\n")

    datos = {}

    # ── Pregunta preliminar ──
    datos["solo_software"] = input("¿Solo software (s/n)? ").lower().startswith("s")

    # 1. Datos del contrato
    print("🟢 1. DATOS DEL CONTRATO")
    datos["objeto_contrato"]       = input("¿Cuál es el objeto del contrato? ")
    datos["necesidad_resuelta"]    = input("¿Qué necesidad resuelve este servicio? ")
    datos["responsable_contrato"]  = input("¿Quién será el responsable del contrato (nombre y cargo)? ")
    datos["lugar_prestacion"]      = input("¿Dónde se prestará el servicio? ")

    # 2. Presupuesto
    print("\n💰 2. PRESUPUESTO")
    datos["pbl_sin_iva"]    = ask_float("¿PBL sin IVA (€)? ")
    datos["iva"]            = ask_float("¿% IVA aplicable? ")
    datos["duracion_meses"] = int(ask_float("Duración inicial (meses): "))
    datos["prorrogas"]      = int(ask_float("¿Meses de prórroga previstos? "))

    # 👉 Calcula VEC e infiere procedimiento y SARA
    vec = datos["pbl_sin_iva"] * (datos["duracion_meses"] + datos["prorrogas"]) / datos["duracion_meses"]

    datos.update({
        "vec":          vec,
        "procedimiento": procedure_type(vec),
        "sara":          sara(vec),
    })

    # 3. Empresa licitadora
    print("\n📄 3. EMPRESA LICITADORA")
    datos["nombre_empresa"]    = input("¿Nombre de la empresa? ")
    datos["cif"]               = input("¿CIF? ")
    datos["domicilio_fiscal"]  = input("¿Domicilio fiscal? ")
    datos["persona_contacto"]  = input("¿Nombre y correo de la persona de contacto? ")
    datos["censo_aeat"]        = input("¿Está inscrita la empresa en el Censo de empresarios de la AEAT? ")

    # 4. Documentación
    print("\n🔐 4. DOCUMENTACIÓN Y REQUISITOS")
    datos["declaracion_responsable"] = input("¿Presentarás la Declaración Responsable? ")
    datos["oferta_economica"]        = input("¿Tienes oferta económica lista? ")
    datos["acepta_pliego"]           = input("¿Aceptas las condiciones del pliego técnico? ")
    datos["perfiles_equipo"]         = input("¿Tu equipo cumple los perfiles mínimos exigidos? ")

    # 5. Protección de datos
    print("\n🔒 5. PROTECCIÓN DE DATOS")
    datos["trata_datos"] = input("¿Tratarás datos personales por cuenta del contratante? ").strip().lower()
    if datos["trata_datos"] in ["sí", "si", "s"]:
        datos["subcontrata_tratamiento"] = input("¿Subcontratarás servidores o servicios de tratamiento? ")
    else:
        datos["subcontrata_tratamiento"] = None

    # 6. Subcontratación
    print("\n📦 6. SUBCONTRATACIÓN")
    datos["subcontratacion"] = input("¿Vas a subcontratar alguna parte del servicio? ").strip().lower()
    if datos["subcontratacion"] in ["sí", "si", "s"]:
        datos["empresas_vinculadas"] = input("¿Tus subcontratistas son empresas no vinculadas? ")
    else:
        datos["empresas_vinculadas"] = None

    # 7. Criterios de valoración
    print("\n📉 7. CRITERIOS DE VALORACIÓN")
    datos["precio_ofertado"] = ask_float("¿Cuál es tu precio ofertado (sin IVA)? ")
    datos["precio_anormal"] = input("¿Has revisado que no sea anormalmente bajo? ")

    # 8. PRTR / NextGen
    print("\n🧾 8. NEXTGENERATION / PRTR")
    datos["cumple_prtr"] = input("¿Cumples con principios medioambientales y antifraude del PRTR? (sí/no): ").strip().lower()
    if datos["cumple_prtr"] in ["sí", "si", "s"]:
        datos["modelos_b1_b2_c"] = input("¿Has rellenado los modelos B1, B2 y C? ")
        datos["titular_real"]    = input("¿Quién es el titular real de la empresa? ")
    else:
        datos["modelos_b1_b2_c"] = None
        datos["titular_real"]    = None

    # 🛡️ GARANTÍAS
    print("\n🛡️  GARANTÍAS")
    datos["garantia_provisional"] = input("¿Exigir garantía provisional? (s/n): ").lower().startswith("s")
    if datos["garantia_provisional"]:
        datos["garantia_provisional_pct"] = ask_float("¿% o cuantía de esa garantía?: ")

    # 📊 SOLVENCIA
    print("\n📊 SOLVENCIA")
    datos["vol_negocios_min"]         = ask_float("Volumen anual de negocios mínimo (€): ")
    datos["servicios_similares_min"]  = ask_float("Importe anual servicios similares mínimo (€): ")
    datos["seguro_rc"]                = ask_float("Seguro de RC profesional mínimo (€): ")

    # 📉 9. PONDERACIÓN DE CRITERIOS
    print("\n📉 9. PONDERACIÓN DE CRITERIOS")
    datos["peso_metodologia"] = ask_float("% Metodología y plan de trabajo: ")
    datos["peso_equipo"]      = ask_float("% Equipo y experiencia: ")
    datos["peso_dnsk"]        = ask_float("% DNSH / sostenibilidad: ")
    datos["peso_precio"]      = ask_float("% Oferta económica: ")

    return datos


def generar_licitacion(datos):
    print("\n📄 RESUMEN DE LICITACIÓN GENERADO:\n")

    texto = f"""
🔹 Objeto del contrato:
{datos['objeto_contrato']}

🔹 Necesidad que se pretende resolver:
{datos['necesidad_resuelta']}

🔹 Lugar de prestación del servicio:
{datos['lugar_prestacion']}

🔹 Persona responsable del contrato:
{datos['responsable_contrato']}

🔹 Presupuesto base (sin IVA): {datos['pbl_sin_iva']} €
🔹 IVA aplicable: {datos['iva']}%
🔹 Prórrogas previstas: {datos['prorrogas']}

🔹 Empresa licitadora:
Nombre: {datos['nombre_empresa']}
CIF: {datos['cif']}
Domicilio fiscal: {datos['domicilio_fiscal']}
Persona de contacto: {datos['persona_contacto']}
Inscrita en el censo AEAT: {datos['censo_aeat']}

🔹 Documentación y requisitos:
- Declaración Responsable: {datos['declaracion_responsable']}
- Oferta Económica: {datos['oferta_economica']}
- Aceptación del Pliego Técnico: {datos['acepta_pliego']}
- Perfiles del equipo: {datos['perfiles_equipo']}
"""

    # Protección de datos (condicional)
    if datos["trata_datos"] in ["sí", "si", "s"]:
        texto += f"""
🔹 Protección de datos:
- ¿Tratará datos personales?: Sí
- ¿Subcontratará tratamiento?: {datos['subcontrata_tratamiento']}
"""
    else:
        texto += "\n🔹 Protección de datos: No se tratarán datos personales.\n"

    # Subcontratación (condicional)
    if datos["subcontratacion"] in ["sí", "si", "s"]:
        texto += f"""
🔹 Subcontratación:
- ¿Se subcontrata parte del servicio?: Sí
- Empresas no vinculadas: {datos['empresas_vinculadas']}
"""
    else:
        texto += "\n🔹 Subcontratación: No se prevé subcontratación.\n"

    # Oferta económica
    texto += f"""
🔹 Oferta económica:
- Precio ofertado: {datos['precio_ofertado']} €
- Revisión de precio anormalmente bajo: {datos['precio_anormal']}
"""

    # PRTR (condicional)
    if datos["cumple_prtr"] in ["sí", "si", "s"]:
        texto += f"""
🔹 Financiación NextGeneration / PRTR:
- Cumple principios PRTR: Sí
- Modelos B1, B2 y C: {datos['modelos_b1_b2_c']}
- Titular real de la empresa: {datos['titular_real']}
"""

    print(texto)

def construir_pregunta_final(respuestas):
    texto = "Quiero generar una licitación pública con los siguientes datos:\n\n"

    for clave, valor in respuestas.items():
        texto += f"- {clave.replace('_', ' ').capitalize()}: {valor}\n"

    texto += "\nRedacta la licitación completa con lenguaje técnico y formato oficial."
    return texto



if __name__ == "__main__":
    respuestas = preguntar_datos()
    generar_licitacion(respuestas) 
    query = construir_pregunta_final(respuestas)
    hist = construir_historial_chat(history.messages)
    MAX_MSGS = 100
    if len(history.messages) > MAX_MSGS:
        history.messages = history.messages[-MAX_MSGS:]
    contexto = contexto_multi_colecciones(query, k=25)   # ajusta k a tu gusto


    out = doc_chain.invoke({
        "question": query,
        "chat_history": hist,
        "context": contexto
    })

    answer = out["text"] if isinstance(out, dict) else out
    print("\n📄 LICITACIÓN GENERADA POR IA:\n")
    print(answer)

    history.add_user_message(query)
    history.add_ai_message(answer)

# ────────────────────────────────────────────────────────────────────────────────
# 9. Bucle principal interactivo
# ────────────────────────────────────────────────────────────────────────────────
print("🤖  Gemini RAG activo.  Escribe 'licitacion' para generar un pliego, 'salir' para terminar.\n")

while True:
    query = input("\nTú: ").strip()
    if not query:
        continue

    lower_q = query.lower()

    # --- Salida ---
    if lower_q == "salir":
        print("🫂  ¡Hasta luego!")
        break

    # --- Modo generación de licitación completa ---
    if lower_q == "licitacion":
        respuestas = preguntar_datos()
        query      = construir_pregunta_final(respuestas)

        contexto = contexto_multi_colecciones(query, k=10)
        hist     = construir_historial_chat(history.messages)

        out    = doc_chain.invoke({"question": query, "chat_history": hist, "context": contexto})
        answer = out["text"] if isinstance(out, dict) else out

        print("\n📄 LICITACIÓN GENERADA POR IA:\n")
        print(answer)

        history.add_user_message(query)
        history.add_ai_message(answer)

        # Poda opcional
        if len(history.messages) > 100:
            history.messages = history.messages[-100:]

        continue  # vuelve al prompt


    try:
        # --- Consulta normal ---
        # Si el usuario menciona un número que coincide con tu índice local por artículo,
        # prioriza ese match hiper-preciso de la colección recién cargada en memoria.
        num_match = re.search(r"\b(\d+)\b", query)
        if num_match and num_match.group(1) in idx_por_num:
            rel = idx_por_num[num_match.group(1)]
            rel.sort(key=lambda d: d.metadata.get("parte", 0))
            matches_docs = agrupar_chunks_por_titulo(rel)
            contexto = "\n\n".join(d.page_content for d in matches_docs)
        else:
            # Si no hay match directo → buscar en TODAS las colecciones Qdrant
            contexto = contexto_multi_colecciones(query, k=8)

        if contexto.strip():
            hist = construir_historial_chat(history.messages)
            out = doc_chain.invoke({"question": query, "chat_history": hist, "context": contexto})
            MAX_MSGS = 100
        if len(history.messages) > MAX_MSGS:
            history.messages = history.messages[-MAX_MSGS:]
            answer = out["text"] if isinstance(out, dict) else out

            print("\n📄  RAG:\n" + answer + "\n")

            history.add_user_message(query)
            history.add_ai_message(answer)
        else:
            # Fallback chat sin RAG
            resp = chat_chain.invoke({"question": query})
            print("\n🗣️  Chat:\n" + resp.content + "\n")
            history.add_user_message(query)
            history.add_ai_message(resp.content)

    except Exception as e:
        print("⚠️  Error en el loop:", e)

me genera este texto: 📄 LICITACIÓN GENERADA POR IA:

## PLIEGO DE CLÁUSULAS ADMINISTRATIVAS PARTICULARES

**CONTRATO DE SERVICIOS INFORMÁTICOS PARA EL DESARROLLO E IMPLANTACIÓN DE UNA PLATAFORMA DE GESTIÓN DOCUMENTAL**

**EXPEDIENTE Nº [NÚMERO DE EXPEDIENTE]**

---

### PREÁMBULO

El presente Pliego de Cláusulas Administrativas Particulares (en adelante, PCAP) tiene por objeto regular las condiciones administrativas a las que ha de ajustarse la contratación de los servicios de desarrollo e implantación de una plataforma de gestión documental para el Ayuntamiento de Logroño, así como la determinación de los derechos y obligaciones de las partes.

La tramitación de este expediente se rige por lo dispuesto en la Ley 9/2017, de 8 de noviembre, de Contratos del Sector Público, por la que se transponen al ordenamiento jurídico español las Directivas del Parlamento Europeo y del Consejo 2014/23/UE y 2014/24/UE, de 26 de febrero de 2014 (en adelante, LCSP), su normativa de desarrollo y, supletoriamente, por las restantes normas de derecho administrativo y, en su defecto, por las normas de derecho privado.

El presente contrato se enmarca en las actuaciones financiadas por el Plan de Recuperación, Transformación y Resiliencia (PRTR), lo que implica la aplicación de los principios y requisitos establecidos en la normativa europea y nacional que lo regula, en particular el principio de "no causar un perjuicio significativo" (Do No Significant Harm - DNSH).

---

### CAPÍTULO I: DISPOSICIONES GENERALES

**Artículo 1. Objeto del Contrato y Código CPV.**

1.  El objeto del presente contrato es la prestación de servicios informáticos consistentes en el desarrollo, implantación y puesta en marcha de una plataforma de gestión documental para el Ayuntamiento de Logroño. El contrato abarca exclusivamente el desarrollo e implantación de software, conforme al Código CPV 72500000 (Servicios informáticos).
2.  Las prestaciones concretas que constituyen el objeto del contrato se detallan en el Pliego de Prescripciones Técnicas (en adelante, PPT), que forma parte integrante del presente PCAP como Anexo III.

**Artículo 2. Naturaleza y Régimen Jurídico.**

1.  El presente contrato tiene la consideración de contrato de servicios, de conformidad con lo establecido en el artículo 17 de la LCSP.
2.  Su régimen jurídico será el establecido en la LCSP, sus disposiciones de desarrollo y las normas complementarias, así como el presente PCAP y el PPT. En lo no previsto en estas normas, se aplicarán supletoriamente las restantes normas de derecho administrativo y, en su defecto, las normas de derecho privado.

**Artículo 3. Necesidad a Satisfacer y Justificación.**

1.  La necesidad que se pretende satisfacer con la celebración del presente contrato es facilitar la digitalización, almacenamiento y consulta de la documentación interna del Ayuntamiento de Logroño, optimizando los procesos administrativos y mejorando la eficiencia en la gestión de la información.
2.  La justificación de la necesidad y la adecuación del objeto del contrato a la misma se contiene en el expediente de contratación, de conformidad con el artículo 116.4.e) de la LCSP. Asimismo, se adjunta el informe de insuficiencia de medios propios para la realización de la prestación, tal como exige el artículo 116.4.f) de la LCSP.

**Artículo 4. Presupuesto Base de Licitación, Valor Estimado del Contrato y Financiación.**

1.  El presupuesto base de licitación (PBL) del presente contrato asciende a **VEINTIÚN MIL EUROS (21.000,00 €)**, sin incluir el Impuesto sobre el Valor Añadido (IVA).
2.  El IVA aplicable es del 21%, lo que supone **CUATRO MIL CUATROCIENTOS DIEZ EUROS (4.410,00 €)**.
3.  El presupuesto total con IVA asciende a **VEINTICINCO MIL CUATROCIENTOS DIEZ EUROS (25.410,00 €)**.
4.  De conformidad con el artículo 100.2 de la LCSP, el presupuesto base de licitación se ha desglosado, indicando los costes directos e indirectos y otros eventuales gastos calculados para su determinación. Se ha tenido en cuenta que, en los contratos en que el coste de los salarios de las personas empleadas para su ejecución formen parte del precio total del contrato, el presupuesto base de licitación indicará de forma desglosada y con desagregación de género y categoría profesional los costes salariales estimados a partir del convenio laboral de referencia.
5.  El valor estimado del contrato (VEC), calculado conforme al artículo 101 de la LCSP, asciende a **TREINTA Y UN MIL QUINIENTOS EUROS (31.500,00 €)**, incluyendo las posibles prórrogas.
6.  La financiación del contrato se realizará con cargo a los fondos propios del Ayuntamiento de Logroño, y se enmarca en las actuaciones financiadas por el Plan de Recuperación, Transformación y Resiliencia (PRTR), lo que implica la observancia de la normativa específica aplicable a dichos fondos. Se incorpora al expediente el certificado de existencia de crédito, conforme al artículo 116.3 de la LCSP.

**Artículo 5. Duración del Contrato y Posibles Prórrogas.**

1.  La duración inicial del contrato será de **DOCE (12) meses** a contar desde la fecha de su formalización.
2.  El contrato podrá ser prorrogado por mutuo acuerdo de las partes antes de la finalización del plazo de duración inicial, por un periodo máximo de **SEIS (6) meses**, sin que la duración total del contrato, incluidas las prórrogas, pueda exceder de **DIECIOCHO (18) meses**. Las prórrogas serán obligatorias para el contratista cuando se hayan establecido en el presente PCAP y el anuncio de licitación, y su importe no exceda del valor estimado inicial del contrato, conforme al artículo 29.2 de la LCSP.

**Artículo 6. División en Lotes.**

El objeto del presente contrato no se ha dividido en lotes, de conformidad con el artículo 99.3 de la LCSP, debido a que la naturaleza de la prestación (desarrollo e implantación de una plataforma integral) hace que la división en lotes pueda comprometer la correcta ejecución del mismo, dificultando la coordinación y la interoperabilidad de los componentes, y generando un riesgo de fragmentación que podría mermar la calidad del servicio. Esta decisión se encuentra debidamente justificada en el expediente de contratación.

**Artículo 7. Confidencialidad.**

1.  El contratista y su personal estarán sujetos a la más estricta confidencialidad respecto de toda la información, datos, documentos y conocimientos a los que tengan acceso durante la ejecución del contrato, especialmente aquellos que sean clasificados o protegidos por la normativa vigente.
2.  Esta obligación de confidencialidad se mantendrá incluso después de la finalización del contrato. El incumplimiento de esta obligación podrá dar lugar a la resolución del contrato y a las responsabilidades que legalmente correspondan.

**Artículo 8. Protección de Datos Personales.**

1.  Dado que el presente contrato implica el tratamiento de datos personales, el contratista tendrá la consideración de encargado del tratamiento, debiendo ajustarse a lo dispuesto en el Reglamento (UE) 2016/679 del Parlamento Europeo y del Consejo, de 27 de abril de 2016 (RGPD), la Ley Orgánica 3/2018, de 5 de diciembre, de Protección de Datos Personales y garantía de los derechos digitales (LOPDGDD), y demás normativa aplicable en materia de protección de datos.
2.  El Ayuntamiento de Logroño, como responsable del tratamiento, establecerá las instrucciones precisas para el tratamiento de los datos personales en el PPT. El contratista deberá cumplir con las siguientes obligaciones, sin perjuicio de otras que se especifiquen en el PPT:
    *   Tratar los datos personales únicamente siguiendo las instrucciones documentadas del responsable del tratamiento.
    *   Garantizar que las personas autorizadas para tratar datos personales se hayan comprometido a respetar la confidencialidad o estén sujetas a una obligación de confidencialidad de naturaleza estatutaria.
    *   Aplicar las medidas de seguridad técnicas y organizativas apropiadas para garantizar un nivel de seguridad adecuado al riesgo, conforme al Esquema Nacional de Seguridad (ENS).
    *   Asistir al responsable del tratamiento en la respuesta al ejercicio de los derechos de los interesados.
    *   Notificar al responsable del tratamiento las violaciones de la seguridad de los datos personales sin dilación indebida.
    *   Suprimir o devolver todos los datos personales una vez finalizada la prestación de los servicios, y suprimir las copias existentes.
    *   Poner a disposición del responsable toda la información necesaria para demostrar el cumplimiento de sus obligaciones.
3.  Se establece que el tratamiento de datos personales será interno por parte del contratista, no permitiéndose la subcontratación del tratamiento de datos a terceros sin la previa autorización expresa y por escrito del Ayuntamiento de Logroño, y siempre que se cumplan las condiciones establecidas en el artículo 28.2.d) del RGPD.

**Artículo 9. Medidas de Seguridad de la Información (Esquema Nacional de Seguridad - ENS).**

1.  El contratista deberá cumplir con las medidas de seguridad de la información establecidas en el Real Decreto 311/2022, de 3 de mayo, por el que se regula el Esquema Nacional de Seguridad (ENS), así como con las guías CCN-STIC que resulten de aplicación.
2.  El sistema de información objeto del presente contrato se categoriza como de **CATEGORÍA MEDIA** en cuanto a la seguridad, lo que implica la aplicación de las siguientes medidas de seguridad, entre otras que se detallarán en el PPT:
    *   **Marco Organizacional (org):** Cumplimiento de la política de seguridad (org.1), normativa de seguridad (org.2), procedimientos de seguridad (org.3) y proceso de autorización (org.4).
    *   **Marco Operacional (op):**
        *   Análisis de riesgos semiformal (op.pl.1 + R1).
        *   Arquitectura de seguridad con sistema de gestión (op.pl.2 + R1).
        *   Proceso formal para la adquisición de nuevos componentes (op.pl.3).
        *   Previsión y monitorización de la capacidad (op.pl.4 + R1).
        *   Uso de componentes certificados del CPSTIC (op.pl.5).
        *   Mantenimiento de inventario de activos (op.exp.1).
        *   Configuración de seguridad (op.exp.2).
        *   Gestión de incidentes (op.exp.7 + R1).
        *   Acuerdos de nivel de servicio con terceros (op.ext.2).
    *   **Medidas de Protección (mp):**
        *   **Personal (mp.per):** Concienciación (mp.per.1), formación (mp.per.4).
        *   **Software (mp.sw):**
            *   Desarrollo de aplicaciones en entorno separado (mp.sw.1). Se exigirá metodología de desarrollo seguro (mp.sw.1.r2.1), seguridad desde el diseño (mp.sw.1.r3.1) y gestión de datos de pruebas (mp.sw.1.r4.1).
            *   Aceptación y puesta en servicio con pruebas en entorno aislado (mp.sw.2 + R1).
        *   **Información (mp.info):**
            *   Protección de datos personales (mp.info.1).
            *   Calificación de la información (mp.info.2) para la dimensión de confidencialidad (nivel MEDIO).
            *   Uso de firma electrónica (mp.info.3 + R1 + R2 + R3) para las dimensiones de integridad y autenticidad (nivel MEDIO/ALTO), requiriendo certificados cualificados y algoritmos autorizados.
            *   Limpieza de documentos (mp.info.5).
            *   Realización de copias de seguridad (mp.info.6 + R1) para la dimensión de disponibilidad (nivel MEDIO).
3.  El contratista deberá presentar una declaración de conformidad con el ENS, así como la documentación que acredite el cumplimiento de las medidas de seguridad exigidas, de acuerdo con lo que se establezca en el PPT.

**Artículo 10. Principio de "No causar un perjuicio significativo" (DNSH).**

1.  En cumplimiento de la normativa europea y nacional relativa al Plan de Recuperación, Transformación y Resiliencia (PRTR), el presente contrato se sujetará al principio de "no causar un perjuicio significativo" (Do No Significant Harm - DNSH), conforme al artículo 17 del Reglamento (UE) 2020/852 del Parlamento Europeo y del Consejo, de 18 de junio de 2020, relativo al establecimiento de un marco para facilitar las inversiones sostenibles.
2.  El contratista deberá garantizar que las actuaciones objeto del contrato no causen un perjuicio significativo a ninguno de los seis objetivos medioambientales definidos en el Reglamento (UE) 2020/852:
    *   Mitigación del cambio climático.
    *   Adaptación al cambio climático.
    *   Uso sostenible y protección de los recursos hídricos y marinos.
    *   Economía circular, incluida la prevención y el reciclado de residuos.
    *   Prevención y control de la contaminación a la atmósfera, el agua o el suelo.
    *   Protección y restauración de la biodiversidad y los ecosistemas.
3.  El licitador deberá presentar una declaración de compromiso de cumplimiento del principio DNSH, conforme al modelo que se adjunta como Anexo V, detallando cómo las medidas propuestas en su oferta contribuyen a este principio y, en particular, cómo se evita cualquier impacto negativo significativo. El incumplimiento de este principio durante la ejecución del contrato podrá dar lugar a la resolución del mismo.
4.  La contribución del contrato a la transición digital se valora en un 100% (Campo de intervención 011: Soluciones de TIC para la Administración, servicios electrónicos, aplicaciones), y a la transición ecológica en un 0%, conforme a la metodología de etiquetado digital (Anexo VII) y climático (Anexo VI) del Reglamento (UE) 2021/241, respectivamente.

---

### CAPÍTULO II: PROCEDIMIENTO DE ADJUDICACIÓN

**Artículo 11. Tipo de Procedimiento.**

El presente contrato se adjudicará mediante **procedimiento abierto simplificado abreviado**, de conformidad con el artículo 159.6 de la LCSP, al ser un contrato de servicios cuyo valor estimado es inferior a 80.000 € y no concurrir las circunstancias que impidan la aplicación de este procedimiento.

**Artículo 12. Publicidad.**

1.  La licitación se anunciará en la Plataforma de Contratación del Sector Público (PCSP), conforme a lo dispuesto en el artículo 159.6 de la LCSP.
2.  El presente PCAP, el PPT y el resto de la documentación del expediente estarán disponibles para su acceso universal y gratuito a través de la PCSP.

**Artículo 13. Presentación de Proposiciones.**

1.  **Forma de presentación:** Las proposiciones deberán presentarse necesaria y únicamente por medios electrónicos a través de la Plataforma de Contratación del Sector Público, de conformidad con la Disposición Adicional Decimosexta de la LCSP. No se admitirá la presentación en soporte físico.
2.  **Plazo de presentación:** El plazo de presentación de proposiciones será el indicado en el anuncio de licitación publicado en la PCSP.
3.  **Documentación a presentar:** La oferta se presentará en dos archivos electrónicos diferenciados:
    *   **Archivo 1: Documentación administrativa y criterios evaluables mediante juicio de valor.**
        *   **Declaración Responsable:** Conforme al modelo del Anexo I del presente PCAP, en la que el firmante declare bajo su responsabilidad:
            *   Ostentar la representación de la sociedad que presenta la oferta.
            *   Contar con la adecuada solvencia económica, financiera y técnica o, en su caso, la clasificación correspondiente.
            *   Contar con las autorizaciones necesarias para ejercer la actividad.
            *   No estar incurso en prohibición de contratar alguna de las previstas en el artículo 71 de la LCSP.
            *   Pronunciarse sobre la existencia del compromiso a que se refiere el artículo 75.2 de la LCSP (compromiso de adscripción de medios), en su caso.
            *   En el caso de empresas extranjeras, el sometimiento al fuero español.
            *   El cumplimiento de las condiciones especiales de ejecución.
            *   El compromiso de cumplimiento del principio DNSH.
            *   La inscripción en el Registro Oficial de Licitadores y Empresas Clasificadas del Sector Público (ROLECE) o en el registro equivalente de la Comunidad Autónoma correspondiente, en la fecha final de presentación de ofertas. Si la inscripción estuviera en trámite, deberá acreditarse la presentación de la solicitud de inscripción junto con la documentación preceptiva y una declaración responsable de haber aportado la documentación preceptiva y de no haber recibido requerimiento de subsanación.
        *   **Documentación relativa a los criterios de adjudicación evaluables mediante juicio de valor:** Propuesta de metodología de trabajo, plan de proyecto, organización del equipo, etc., conforme a lo especificado en el PPT. Esta documentación no deberá contener ninguna referencia a la oferta económica.
    *   **Archivo 2: Proposición económica y criterios evaluables mediante fórmulas.**
        *   **Proposición Económica:** Conforme al modelo del Anexo II del presente PCAP, incluyendo el precio ofertado (sin IVA y con IVA), y cualquier otro elemento cuantificable mediante fórmula.
        *   **Documentación relativa a los criterios de adjudicación evaluables mediante fórmulas:** En su caso, aquella que permita la aplicación de las fórmulas establecidas en el Artículo 15.2, si no estuviera ya incluida en la proposición económica.
4.  **Uso de medios electrónicos:** La presentación de ofertas se realizará mediante el uso de medios electrónicos, garantizando la integridad y confidencialidad de las mismas. Se entenderá por huella electrónica de la oferta el conjunto de datos cuyo proceso de generación garantiza que se relacionan de manera inequívoca con el contenido de la oferta propiamente dicha, y que permiten detectar posibles alteraciones del contenido de esta garantizando su integridad, conforme a la Disposición Adicional Decimosexta.1.h) de la LCSP. Los formatos de los documentos electrónicos deberán ajustarse a especificaciones públicamente disponibles y de uso no sujeto a restricciones (DA 16.1.j LCSP).
5.  **No se exigirá la constitución de garantía provisional** por parte de los licitadores, de conformidad con el artículo 159.4.b) de la LCSP.

**Artículo 14. Mesa de Contratación.**

1.  La Mesa de Contratación será el órgano competente para la calificación de la documentación presentada, la valoración de las ofertas y la formulación de la propuesta de adjudicación.
2.  La Mesa de Contratación estará compuesta por los miembros designados al efecto por el Órgano de Contratación.

**Artículo 15. Criterios de Adjudicación.**

La adjudicación del contrato se realizará a la oferta económicamente más ventajosa, valorándose los siguientes criterios, de conformidad con los artículos 145 y 146 de la LCSP:

1.  **Criterios evaluables mediante juicio de valor (hasta 55 puntos):** La valoración de estos criterios se realizará por los servicios técnicos del órgano de contratación, en un plazo no superior a siete días, y deberá estar efectuada con anterioridad a la apertura del archivo electrónico que contenga la oferta económica, conforme al artículo 159.4.f) de la LCSP.
    *   **Metodología de trabajo y plan de proyecto (hasta 25 puntos):** Se valorará la claridad, coherencia, detalle y adecuación de la metodología propuesta para el desarrollo e implantación de la plataforma, así como la planificación de las fases, hitos y entregables.
    *   **Organización y perfiles del equipo adscrito al proyecto (hasta 30 puntos):** Se valorará la experiencia, cualificación y adecuación de los perfiles profesionales propuestos para la ejecución del contrato, así como la estructura organizativa del equipo y la asignación de responsabilidades. Se deberá aportar la información detallada de los perfiles conforme al Anexo III del PPT.

2.  **Criterios evaluables mediante la aplicación de fórmulas (hasta 45 puntos):**
    *   **Precio (hasta 35 puntos):** Se valorará la oferta económica más baja. La puntuación se asignará de forma inversamente proporcional al precio ofertado, utilizando la fórmula que se establecerá en el PPT.
    *   **Cumplimiento del principio DNSH (hasta 10 puntos):** Se valorará la propuesta del licitador en relación con la aplicación de medidas adicionales o mejoras que superen los requisitos mínimos del principio DNSH, conforme a la justificación detallada en el Anexo V. Se valorará la concreción, viabilidad y el impacto positivo adicional de las medidas propuestas en relación con los objetivos medioambientales.

**Artículo 16. Examen y Valoración de las Proposiciones.**

1.  La Mesa de Contratación procederá a la apertura del Archivo 1 (documentación administrativa y criterios de juicio de valor). Se verificará la Declaración Responsable y, en su caso, se requerirá la subsanación de defectos u omisiones, conforme al artículo 159.4.c) de la LCSP.
2.  Una vez calificada la documentación administrativa, los servicios técnicos evaluarán las proposiciones conforme a los criterios de juicio de valor.
3.  Posteriormente, en acto público (salvo que se prevea que en la licitación puedan emplearse medios electrónicos, como es el caso), la Mesa de Contratación procederá a la apertura del Archivo 2 (proposición económica y criterios evaluables mediante fórmulas), conforme al artículo 157.4 de la LCSP.
4.  La Mesa evaluará y clasificará las ofertas, excluyendo aquellas que no cumplan los requerimientos del pliego o que incurran en valores anormales o desproporcionados, si los hubiera.

**Artículo 17. Clasificación de Ofertas y Requerimiento de Documentación.**

1.  Una vez valoradas las ofertas, la Mesa de Contratación realizará la propuesta de adjudicación a favor del candidato con mejor puntuación.
2.  La Mesa comprobará en el Registro Oficial de Licitadores y Empresas Clasificadas del Sector Público (ROLECE) o en el registro equivalente de la Comunidad Autónoma, que la empresa está debidamente constituida, el firmante de la proposición tiene poder bastante para formular la oferta, ostenta la solvencia económica, financiera y técnica o, en su caso, la clasificación correspondiente y no está incursa en ninguna prohibición para contratar, conforme al artículo 159.4.c.3º de la LCSP.
3.  Si el licitador hubiera hecho uso de la facultad de acreditar la presentación de la solicitud de inscripción en el correspondiente Registro, la Mesa requerirá al licitador para que justifique documentalmente todos los extremos referentes a su aptitud para contratar.
4.  El licitador propuesto como adjudicatario deberá aportar, en el plazo que se le indique, la documentación justificativa de la declaración responsable y de su aptitud para contratar, así como la garantía definitiva. Las Administraciones Públicas recabarán electrónicamente los documentos que ya se encuentren en poder de la Administración actuante o hayan sido elaborados por cualquier otra Administración, salvo que el interesado se oponga expresamente o la ley especial aplicable requiera su consentimiento expreso, conforme al artículo 28 de la Ley 39/2015, de 1 de octubre, del Procedimiento Administrativo Común de las Administraciones Públicas, en la redacción dada por la Disposición Final Duodécima del Real Decreto 311/2022.

**Artículo 18. Adjudicación del Contrato.**

1.  El Órgano de Contratación, a la vista de la propuesta de la Mesa, adjudicará el contrato al licitador que haya presentado la oferta económicamente más ventajosa.
2.  La adjudicación se notificará a los licitadores y se publicará en la Plataforma de Contratación del Sector Público, conforme al artículo 159.6 de la LCSP.

---

### CAPÍTULO III: APTITUD PARA CONTRATAR

**Artículo 19. Capacidad de Obrar.**

1.  Podrán contratar con el Ayuntamiento de Logroño las personas físicas o jurídicas que tengan plena capacidad de obrar, no estén incursas en prohibición de contratar y acrediten su solvencia económica y financiera y técnica o profesional, conforme al artículo 65 de la LCSP.
2.  La capacidad de obrar de las empresas se acreditará mediante la inscripción en el Registro Mercantil o en el que corresponda, o mediante la presentación de la documentación que acredite su constitución y los poderes del representante, conforme al artículo 159.4.c) de la LCSP.

**Artículo 20. Solvencia Económica y Financiera.**

La solvencia económica y financiera se acreditará por uno o varios de los siguientes medios, conforme al artículo 87 de la LCSP:
1.  **Volumen anual de negocios:** El volumen anual de negocios del licitador en el ámbito de actividades correspondiente al objeto del contrato, referido al mejor de los tres últimos ejercicios disponibles en función de la fecha de creación o de inicio de las actividades de la empresa, deberá ser igual o superior a **QUINCE MIL EUROS (15.000,00 €)**. Se acreditará mediante las cuentas anuales aprobadas y depositadas en el Registro Mercantil o en el registro oficial que corresponda.
2.  **Seguro de indemnización por riesgos profesionales:** Declaración indicando la existencia de un seguro de indemnización por riesgos profesionales por un importe mínimo de cobertura de **VEINTE MIL EUROS (20.000,00 €)**. Se acreditará mediante certificado expedido por el asegurador, en el que consten los importes y riesgos cubiertos, y la fecha de vencimiento del seguro.

**Artículo 21. Solvencia Técnica o Profesional.**

La solvencia técnica o profesional se acreditará por uno o varios de los siguientes medios, conforme al artículo 88 de la LCSP:
1.  **Relación de los principales servicios o trabajos realizados:** Una relación de los principales servicios o trabajos realizados en los últimos tres años, que sean de naturaleza similar o análoga a los que constituyen el objeto de este contrato, cuyo importe anual acumulado en el año de mayor ejecución deberá ser igual o superior a **TREINTA MIL EUROS (30.000,00 €)**. Se indicará el importe, la fecha y el destinatario, público o privado. Se acreditará mediante certificados expedidos o visados por el órgano competente cuando el destinatario sea una entidad del sector público o, cuando el destinatario sea un sujeto privado, mediante un certificado expedido por este o, a falta de este, mediante una declaración del empresario acompañado de los documentos que acrediten la realización de la prestación.
2.  **Declaración sobre el personal técnico o las unidades técnicas:** Indicación del personal técnico o de las unidades técnicas, estén o no integradas en la empresa, de los que se disponga para la ejecución del contrato, especialmente de los responsables del control de calidad. Se deberá aportar la información detallada de los perfiles conforme al Anexo III del PPT.
3.  **Descripción del equipo técnico y medidas para garantizar la calidad:** Descripción del equipo técnico y de las medidas adoptadas por el empresario para garantizar la calidad y los medios de estudio y de investigación de la empresa.

**Artículo 22. Ausencia de Prohibiciones de Contratar.**

Los licitadores no deberán estar incursos en ninguna de las prohibiciones de contratar establecidas en el artículo 71 de la LCSP. La acreditación de este requisito se realizará mediante la declaración responsable incluida en el Anexo I. Las circunstancias relativas a la ausencia de prohibiciones de contratar deberán concurrir en la fecha final de presentación de ofertas y subsistir en el momento de perfección del contrato, conforme al artículo 69.4 de la LCSP.

**Artículo 23. Compromiso de Adscripción de Medios.**

El licitador deberá acreditar que dispone de los medios personales y materiales suficientes para la correcta ejecución del contrato, o el compromiso de adscribirlos a la ejecución del mismo. En su caso, se presentará el compromiso de adscripción de medios conforme al Anexo IV.

**Artículo 24. Uniones Temporales de Empresas (UTE).**

Las empresas podrán concurrir agrupadas en Unión Temporal de Empresas (UTE), sin que sea necesaria la formalización de la misma en escritura pública hasta que se haya efectuado la adjudicación a su favor. La declaración responsable deberá ser presentada por cada una de las empresas que la componen, y en ella se indicará el compromiso de constituir formalmente la UTE en caso de resultar adjudicatarias.

**Artículo 25. Empresas Extranjeras.**

Las empresas extranjeras deberán acreditar su capacidad de obrar conforme a la legislación de su país de origen. En la declaración responsable, la empresa extranjera deberá incluir el sometimiento al fuero español.

---

### CAPÍTULO IV: GARANTÍAS

**Artículo 26. Garantía Provisional.**

De conformidad con el artículo 159.4.b) de la LCSP, para el procedimiento abierto simplificado abreviado **no se exigirá la constitución de garantía provisional** por parte de los licitadores.

**Artículo 27. Garantía Definitiva.**

1.  El adjudicatario deberá constituir una garantía definitiva equivalente al **5% del precio final de adjudicación** (IVA excluido), en el plazo de diez (10) días hábiles contados desde el siguiente al de la notificación de la adjudicación, conforme al artículo 107.1 de la LCSP.
2.  La garantía definitiva responderá de los siguientes conceptos, de conformidad con el artículo 110 de la LCSP:
    *   De la correcta ejecución de las prestaciones objeto del contrato.
    *   De los defectos de la ejecución y de las obligaciones de mantenimiento o reparación.
    *   De las penalidades impuestas al contratista por incumplimiento de sus obligaciones.
    *   De la incautación de la garantía en caso de resolución del contrato por causa imputable al contratista.
    *   De los gastos derivados de la demora en la entrega del contrato.
3.  La garantía podrá constituirse en metálico, valores públicos, aval bancario, seguro de caución o mediante retención del precio, conforme al artículo 108 de la LCSP.

---

### CAPÍTULO V: EJECUCIÓN DEL CONTRATO

**Artículo 28. Perfección y Formalización del Contrato.**

1.  El contrato se perfeccionará con su formalización, que se realizará en documento administrativo en el plazo de quince (15) días hábiles a contar desde el siguiente al de la notificación de la adjudicación, de conformidad con el artículo 153 de la LCSP.
2.  El contratista deberá aportar la garantía definitiva y la documentación requerida en el artículo 17 antes de la formalización del contrato.

**Artículo 29. Obligaciones del Contratista.**

Además de las obligaciones específicas detalladas en el PPT, el contratista tendrá las siguientes obligaciones generales:
1.  Ejecutar el contrato con estricta sujeción a las cláusulas del presente PCAP, a las prescripciones técnicas del PPT y a las instrucciones que le sean dadas por el Responsable del Contrato.
2.  Mantener la capacidad y solvencia acreditada durante toda la ejecución del contrato.
3.  Cumplir con la normativa laboral, de seguridad social, fiscal y medioambiental vigente.
4.  Cumplir con las obligaciones en materia de protección de datos personales y seguridad de la información (ENS) establecidas en los Artículos 8 y 9 del presente PCAP.
5.  Cumplir con el principio DNSH en todas las actuaciones relacionadas con el contrato.
6.  Colaborar con el Responsable del Contrato y facilitar toda la información necesaria para el seguimiento y control de la ejecución.

**Artículo 30. Subcontratación.**

1.  El contratista podrá subcontratar parte de las prestaciones objeto del contrato, siempre que se cumplan los requisitos y límites establecidos en el artículo 215 de la LCSP.
2.  El contratista deberá comunicar por escrito al Órgano de Contratación la intención de subcontratar, identificando las partes de la prestación a subcontratar, el nombre o razón social del subcontratista y la cuantía del subcontrato. La subcontratación no podrá superar el porcentaje máximo establecido en el PPT, si lo hubiera.
3.  Se reitera que el tratamiento de datos personales no podrá ser subcontratado, de conformidad con lo establecido en el Artículo 8.3 del presente PCAP.
4.  El contratista será el único responsable de la ejecución del contrato frente al Ayuntamiento de Logroño, incluyendo las partes subcontratadas.

**Artículo 31. Responsable del Contrato.**

1.  Se designa como Responsable del Contrato a **Dña. Marta Sánchez Ruiz, Jefa del Departamento de Sistemas**, o persona en quien delegue.
2.  El Responsable del Contrato supervisará la ejecución del contrato, dictará las instrucciones necesarias para su correcto desarrollo y resolverá las incidencias que puedan surgir, de conformidad con el artículo 62 de la LCSP.

**Artículo 32. Modificaciones del Contrato.**

El contrato solo podrá modificarse por razones de interés público, en los casos y con los límites establecidos en los artículos 203 a 207 de la LCSP. Cualquier modificación deberá ser justificada, tramitada y aprobada conforme a la normativa vigente.

**Artículo 33. Pago del Precio.**

1.  El pago del precio se realizará conforme a lo establecido en el PPT y en el calendario de pagos que se establezca, previa conformidad del Responsable del Contrato con las prestaciones realizadas.
2.  El pago se realizará mediante transferencia bancaria a la cuenta indicada por el contratista, en el plazo máximo de treinta (30) días desde la fecha de aprobación de las certificaciones de obra o de los documentos que acrediten la conformidad con la prestación realizada, conforme al artículo 198 de la LCSP.

**Artículo 34. Recepción y Liquidación.**

1.  Una vez finalizada la ejecución del contrato, el Responsable del Contrato emitirá un informe sobre la correcta ejecución de las prestaciones, que servirá de base para la recepción del contrato.
2.  La recepción se formalizará mediante acta, de conformidad con el artículo 210 de la LCSP.
3.  Tras la recepción, se procederá a la liquidación del contrato, determinando el saldo resultante entre las prestaciones realizadas y los pagos efectuados.

**Artículo 35. Resolución del Contrato.**

El contrato podrá resolverse por las causas establecidas en el artículo 211 de la LCSP, así como por el incumplimiento de las obligaciones esenciales del contratista, incluyendo las relativas a la protección de datos, seguridad de la información y el principio DNSH. La resolución se tramitará conforme a lo dispuesto en los artículos 212 y 213 de la LCSP.

**Artículo 36. Régimen de Recursos.**

1.  Contra los actos de preparación y adjudicación del contrato que sean susceptibles de recurso especial en materia de contratación, podrá interponerse dicho recurso ante el Tribunal Administrativo Central de Recursos Contractuales, de conformidad con los artículos 44 y siguientes de la LCSP.
2.  Contra el resto de actos y decisiones que se adopten en el procedimiento, se podrán interponer los recursos administrativos y contencioso-administrativos que procedan, de conformidad con la Ley 39/2015, de 1 de octubre, del Procedimiento Administrativo Común de las Administraciones Públicas, y la Ley 29/1998, de 13 de julio, reguladora de la Jurisdicción Contencioso-administrativa.

**Artículo 37. Jurisdicción Competente.**

Las cuestiones litigiosas que surjan entre las partes en relación con el presente contrato serán resueltas por los órganos de la jurisdicción contencioso-administrativa, de conformidad con el artículo 25.1 de la LCSP.

---

### ANEXOS

*   **Anexo I: Modelo de Declaración Responsable.**
*   **Anexo II: Modelo de Proposición Económica.**
*   **Anexo III: Pliego de Prescripciones Técnicas (PPT).** (Documento separado que detalla las especificaciones técnicas del desarrollo, implantación, perfiles del equipo y los requisitos ENS).
*   **Anexo IV: Modelo de Compromiso de Adscripción de Medios.**
*   **Anexo V: Modelo de Declaración de Cumplimiento del Principio "No causar un perjuicio significativo" (DNSH).**

---

En Logroño, a [DÍA] de [MES] de [AÑO].

EL ÓRGANO DE CONTRATACIÓN
[FIRMA]
[NOMBRE DEL REPRESENTANTE DEL ÓRGANO DE CONTRATACIÓN]
[CARGO]
Ayuntamiento de Logroño

---

qué parte del código tengo que modificar o en la parte donde meto el prompt tengo que modificar para que el texto no me ponga Capítulos ni artículos en el encabezado?( me refiero a la palabra ### CAPÍTULO y **Artículo)
